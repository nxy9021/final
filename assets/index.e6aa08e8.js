import"./vendor.0dd1e043.js";!function(t=".",s="__import__"){try{self[s]=new Function("u","return import(u)")}catch(e){const i=new URL(t,location),o=t=>{URL.revokeObjectURL(t.src),t.remove()};self[s]=t=>new Promise(((e,r)=>{const a=new URL(t,i);if(self[s].moduleMap[a])return e(self[s].moduleMap[a]);const n=new Blob([`import * as m from '${a}';`,`${s}.moduleMap['${a}']=m;`],{type:"text/javascript"}),c=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(n),onerror(){r(new Error(`Failed to import: ${t}`)),o(c)},onload(){e(self[s].moduleMap[a]),o(c)}});document.head.appendChild(c)})),self[s].moduleMap={}}}("assets/");const t={boy1:"boy1",boy2:"boy2",girl1:"girl1",girl2:"girl2",girl3:"girl3",girl4:"girl4"},s={default:{cursor:"assets/img/cursors/cdefault.png",button:"assets/img/bubbles/bdefault.png",color:null},question:{cursor:"assets/img/cursors/cyellow.png",button:"assets/img/bubbles/byellow.png",color:16251904},food:{cursor:"assets/img/cursors/cred.png",button:"assets/img/bubbles/bred.png",color:16734810},dots:{cursor:"assets/img/cursors/cblue.png",button:"assets/img/bubbles/bblue.png",color:49919},wakeup:{cursor:"assets/img/cursors/cgreen.png",button:"assets/img/bubbles/bgreen.png",color:60040}};var e,i;(i=e||(e={})).Default="default",i.Question="question",i.Food="food",i.Dots="dots",i.Wakeup="wakeup";class o extends Phaser.Scene{constructor(){super("preloader")}preload(){this.load.image("ref","assets/img/lvl1layout.png"),this.load.image("bgBeige","assets/img/solidbg/bg_beige.png"),this.load.image("heatBg","assets/img/heatgauge_bg.png"),this.load.image("heatImg","assets/img/heatgauge.png");for(const t in e){const s=e[t].toLowerCase();this.load.animation(s,`assets/img/distractions/${s}.json`),this.load.atlas(s,`assets/img/distractions/${s}.png`,`assets/img/distractions/${s}.json`)}Object.keys(t).forEach((s=>{const e=t[s];this.load.image(e,`assets/img/charactors/${e}.png`)}));for(const t in e)this.load.image(`${e[t]}Button`,s[e[t]].button)}create(){this.scene.start("lvl1")}}function r(t,s,e){t.create({key:s,frames:e,frameRate:24,repeat:-1})}class a{constructor(t,s,i,o,a){this._distractionType=e.Default,this._countDownBar=null,this._backgroundVerticalOffset=10,this.clickHandler=()=>{this._scene.events.emit("distractionClick",{name:this._name,distractionType:this._distractionType})},this._scene=t,this._name=o;for(const n in e){const s=`${e[n]}Animation`,i=t.textures.get(e[n]).getFrameNames().sort().map((t=>({key:e[n],frame:t})));r(t.anims,s,i)}this._background=this._scene.add.image(s,i-this._backgroundVerticalOffset,"bgBeige").setScale(.6,.6),this._sprite=t.add.sprite(s,i,e.Default),this._topLeft=this._background.getTopLeft(),this._topRight=this._background.getTopRight(),this._width=this._topRight.x-this._topLeft.x,this._countDownBar=this._scene.add.rectangle(this._topLeft.x,this._topLeft.y+6,0,12,25599),this._updateDistractionVisuals(),this._background.setInteractive().on("pointerdown",this.clickHandler,this._scene),this._character=this._scene.add.image(s,i+3.5,a).setScale(.6,.6)}update(){if(null!=this._countdown){let t=this._countdown.getProgress();this._countDownBar.width=this._width-this._width*t,this._countDownBar.isFilled=!0,1==t&&this.reset()}}setDistraction(t,s){this._distractionType=t,this.startTimer(s),this._updateDistractionVisuals()}reset(){this._distractionType=e.Default,this.startTimer(0),this._updateDistractionVisuals()}startTimer(t){this._countdown=this._scene.time.addEvent({delay:t})}_updateDistractionVisuals(){this._sprite.setTexture(this._distractionType),this._sprite.play(`${this._distractionType}Animation`),this._distractionType==e.Default?this._background.clearTint():this._background.setTint(s[this._distractionType].color)}}class n extends Phaser.Scene{constructor(){super("lvl1"),this.distractionTiles={l1c1:Phaser.GameObjects.Sprite,l1c2:Phaser.GameObjects.Sprite,l1c3:Phaser.GameObjects.Sprite,l2c1:Phaser.GameObjects.Sprite,l2c2:Phaser.GameObjects.Sprite,l2c3:Phaser.GameObjects.Sprite},this.barTimerEvents=[],this.currentClickedDistraction=e.Default,this.comboCount=0,this.gpaPoints=0,this.setupDistractionButton=(t,e,i)=>{let o=s[t],r=this.add.sprite(e,i,`${t}Button`);r.setInteractive({cursor:`url(${o.cursor}), pointer`}),r.on("pointerdown",(()=>{r.setTint(o.color),this.input.setDefaultCursor(`url(${o.cursor}), pointer`),this.currentClickedDistraction=t}))}}distractionButtonOnClickHandler(t){this.currentClickedDistraction!==e.Default&&t.distractionType==this.currentClickedDistraction?(this.comboCount++,this.distractionTiles[t.name].reset()):this.comboCount=0,this.currentClickedDistraction=e.Default,this.input.setDefaultCursor(`url(${s.default.cursor}), pointer`)}onGameTimeOver(){}create(){this.add.image(460,320,"heatBg"),this.distractionTiles.l1c1=new a(this,150,196,"l1c1",t.boy1),this.distractionTiles.l1c2=new a(this,400,196,"l1c2",t.boy2),this.distractionTiles.l1c3=new a(this,650,196,"l1c3",t.girl1),this.distractionTiles.l2c1=new a(this,150,410,"l2c1",t.girl2),this.distractionTiles.l2c2=new a(this,400,410,"l2c2",t.girl3),this.distractionTiles.l2c3=new a(this,650,410,"l2c3",t.girl4),this.setupDistractionButton(e.Dots,150,570),this.setupDistractionButton(e.Question,300,570),this.distractionTiles.l1c1.setDistraction(e.Dots,1e3),this.distractionTiles.l1c2.setDistraction(e.Question,3e3),this.distractionTiles.l2c3.setDistraction(e.Food,2e3),this.distractionTiles.l2c2.setDistraction(e.Wakeup,4e3),this.distractionTiles.l2c1.setDistraction(e.Dots,5e3),this.events.on("distractionClick",(t=>this.distractionButtonOnClickHandler(t))),this.input.setDefaultCursor("url(assets/img/cursors/cdefault.png), pointer"),this.text=this.add.text(40,40,"",{fontFamily:"Roboto"}).setFontSize(20),this.mainTimer=this.time.delayedCall(6e4,this.onGameTimeOver,[],this),this.gpaText=this.add.text(40,100,"",{fontFamily:"Roboto"}).setFontSize(20)}update(){const t=this.mainTimer.getProgress().toString().substr(0,4);this.text.setText(`Time: ${t}`),Object.keys(this.distractionTiles).forEach((t=>this.distractionTiles[t].update()))}}const c={type:Phaser.AUTO,width:900,height:640,scene:[o,n]};new Phaser.Game(c);
